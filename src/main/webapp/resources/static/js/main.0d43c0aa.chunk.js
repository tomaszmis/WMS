(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{236:function(e,t,a){e.exports=a(314)},241:function(e,t,a){},242:function(e,t,a){},314:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),o=a.n(l),i=(a(241),a(242),a(370)),c=a(101),s=a(53),u=a(222),d=a.n(u),m=a(223),p=a(84),h=a(12),f=a(13),g=a(17),b=a(16),v=a(18),y=a(3),E=a(5),w=a(346),k=a(347),j=a(181),O=a(209),C=a.n(O),P=a(210),S=a.n(P),N=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).handleLogout=function(){var e=a.props,t=e.apiConnector,n=e.handleLog;t.logout().then(function(){n(!1)})},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"showTitle",value:function(){this.props.location}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.handleMenuState,n=e.menuOpen,l=e.apiConnector.user;return r.a.createElement("div",{className:t.root},r.a.createElement(w.a,{color:"primary",position:"fixed",className:Object(y.default)(t.appBar,Object(p.a)({},t.appBarShift,n))},r.a.createElement(k.a,null,r.a.createElement(j.a,{color:"inherit","aria-label":"Open drawer",onClick:a,edge:"start",className:Object(y.default)(t.menuButton,n&&t.hide)},r.a.createElement(C.a,null)),r.a.createElement("div",{className:t.logout},r.a.createElement("p",{className:t.logoutUser},l?l.email:""),r.a.createElement("a",{href:"http://localhost:8080/?logout"},r.a.createElement(j.a,{className:t.logoutButton,onClick:this.handleLogout},r.a.createElement(S.a,null)))))))}}]),t}(n.Component),x=Object(E.a)(function(e){return{root:{flexGrow:1},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},logout:{position:"absolute",right:"20px"},logoutButton:{float:"left"},logoutUser:{height:48,float:"left",lineHeight:"48px",margin:0}}})(N),T=a(130),D=a(371),F=a(350),A=a(349),I=a(212),B=a.n(I),V=a(213),M=a.n(V),z=a(187),W=a(351),L=a(50),q=a.n(L),R=r.a.forwardRef(function(e,t){return r.a.createElement(c.b,Object.assign({innerRef:t},e))}),H=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"checkPath",value:function(e){return this.props.location.pathname.indexOf(e)>=0}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.handleMenuState,l=t.menuOpen,o=t.menuItems,c=t.role,s=t.position;return r.a.createElement("div",{className:a.root},r.a.createElement(i.a,null),r.a.createElement(D.a,{className:a.drawer,variant:"persistent",anchor:"left",open:l,classes:{paper:a.drawerPaper}},r.a.createElement("div",{className:a.drawerHeader},r.a.createElement(j.a,{onClick:n},l?r.a.createElement(B.a,null):r.a.createElement(M.a,null))),r.a.createElement(A.a,null),r.a.createElement(F.a,null,o.map(function(t,n){return!t.roles&&1===c.id||t.roles&&t.roles.includes(s)?r.a.createElement(q.a,{component:R,key:"".concat(t.title.toLowerCase(),"_").concat(n),to:t.path,className:a.link},r.a.createElement(z.a,{button:!0,selected:e.checkPath(t.path)},r.a.createElement(W.a,{primary:t.title}))):r.a.createElement(r.a.Fragment,null)})),r.a.createElement(A.a,null)))}}]),t}(n.Component),U=Object(s.g)(Object(E.a)(function(e){return{root:{display:"flex"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(T.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"space-between"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},link:{textDecoration:"none",display:"block"},checkedLink:{textDecoration:"none",display:"block"},logoContainer:{justifyContent:"center",opacity:"1 !important"},logo:{height:80,margin:"-5px 0"}}})(H)),_=a(362),G=a(366),K=a(365),Z=a(363),J=a(364),X=a(369),Y=a(102),Q=a(93),$=a(358),ee=a(359),te=a(360),ae=a(123),ne=a(217),re=a.n(ne),le=a(142),oe=a(94),ie=a(352),ce=a(355),se=a(356),ue=a(357),de={validateEmail:function(e,t){if(t&&0===e.length)return!0;if(e.length>0){return!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}return!1},validatePassword:function(e){return!/^.{8,32}$/.test(String(e))},validateField:function(e){return!e&&0!==e||""===e}},me=a(214),pe=a.n(me),he=a(215),fe=a.n(he),ge=a(372),be=a(137),ve=a.n(be),ye=a(25),Ee=a.n(ye),we=pe()(fe.a),ke=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).setCustomRelationFieldValues=function(e){var t={};Object.keys(e).forEach(function(a){return t[a]=e[a]}),a.setState(e)},a.handleValueChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(l){var o,i={};switch(n){case"email":o=de.validateEmail(l.target.value);break;default:o=!!t&&de.validateField(l.target.value)}["number","money","percent","amount"].includes(r)&&parseFloat(l.target.value)<0?i[e]={v:0,e:o}:i[e]={v:l.target.value,e:o},a.setState({values:Object.assign(a.state.values,i)})}},a.handleSaveData=function(e){e.preventDefault();var t=a.props,n=t.closeHandler,r=t.saveData,l=t.tableName,o=(t.formBuilderSubject,a.data?a.data.id.toString():null),i=!1,c={},s=a.state.values;a.fields.forEach(function(e){var t=e.fName||e.name;switch(e.type){case"number":case"money":case"amount":s[t].v=s[t].v.replace(",","."),s[t].e?(s[t].showE=!0,i=!0):c[t]=parseInt(100*parseFloat(s[t].v));break;case"custom_relationship":a.state[e.config.idListNames[0]].length>0?e.config.idListNames.forEach(function(e){return c[e]=a.state[e]}):(s[t].showE=!0,i=!0);break;default:s[t].e||0===s[t].e||"0"===s[t].e?(s[t].showE=!0,i=!0):c[t]=s[t].v}}),i?a.setState({values:s}):r(l,c,o).then(function(e){e.data?we.fire({type:"success",title:"Rekord ".concat(a.data?"zedytowany ":"dodany "," pomy\u015blnie!"),showConfirmButton:!1,showCancelButton:!1}).then(n(!1,null,!0)()):we.fire({type:"error",title:"Co\u015b posz\u0142o nie tak.",showConfirmButton:!1,showCancelButton:!1})}).catch(function(e){console.log(e),we.fire({type:"error",title:"Co\u015b posz\u0142o nie tak.",showConfirmButton:!1,showCancelButton:!1})})},a.setCustomRelationFieldValues=a.setCustomRelationFieldValues.bind(Object(ae.a)(a)),a.fields=e.fields,a.data=e.data,a.defaultValues={},a.fields.forEach(function(e){var t=e.fName||e.name;switch(e.type){case"select":"function"!==typeof e.values&&(a.defaultValues[t]={v:a.data?a.data[t]:e.config.values[0].v,e:!1,showE:!1});break;case"money":a.defaultValues[t]={v:a.data?parseFloat(a.data[t]/100).toFixed(2).replace(".",","):"",e:!a.data&&!!e.required,showE:!1};break;case"number":case"amount":a.defaultValues[t]={v:a.data?a.data[t]/100:"",e:!a.data&&!!e.required,showE:!1};break;default:a.defaultValues[t]={v:a.data?a.data[t]:"",e:!a.data&&!!e.required,showE:!1}}}),a.state={loaded:!1,values:Object(T.a)({},a.defaultValues)},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.apiConnector,a={loaded:!0},n=[],r=[];this.props.fields.forEach(function(e){e.type&&e.type.indexOf("relationship")>=0&&e.config&&e.config.reference&&(n.push(t.getSelectValues(e.config.reference)),r.push(e.config.reference),"custom_relationship"===e.type&&e.config.idListNames&&e.config.idListNames.forEach(function(e){return a[e]=[]}))}),n.length?Promise.all(n).then(function(t){t.forEach(function(e,t){e&&e.data&&(a[r[t]]=Object.keys(e.data).map(function(t){return{k:t,v:e.data[t]}}))}),e.setState(a)}):this.setState(a)}},{key:"generateHelperText",value:function(e,t){var a="";switch(e&&(a+="Pole wymagane. "),t){case"email":a+="Musi zawiera\u0107 poprawny adres email."}return a}},{key:"getDataInput",value:function(e){var t=this.state,a=t.values,n=t.loaded,l=this.props,o=l.classes,i=l.apiConnector,c=e.type||"text",s=e.fName||e.name;switch(c){case"date":return r.a.createElement(oe.b,{utils:le.a,locale:ve.a},r.a.createElement(oe.a,{id:s,key:s,name:s,label:e.label,className:Object(y.default)(o.field),value:a[s].v,error:a[s].e&&a[s].showE,helperText:a[s].e&&a[s].showE?this.generateHelperText(e.required,e.validators):"",onChange:this.handleValueChange(s,e.required,e.validators),format:"yyyy-MM-dd",invalidLabel:"",clearable:!0}));case"select":return r.a.createElement(ie.a,{id:s,key:s,name:s,select:!0,label:e.label,className:"".concat(o.field," ").concat(o.select),value:a[s].v,error:a[s].e&&a[s].showE,helperText:a[s].e&&a[s].showE?this.generateHelperText(e.required,e.validators):"",onChange:this.handleValueChange(s,e.required,e.validators)},e.required?[]:r.a.createElement(Ee.a,{value:""}," "),e.config.values.map(function(e){return r.a.createElement(Ee.a,{key:e.v,value:e.v},e.l)}));case"custom_relationship":var u=e.config.Component;if(n&&u)return r.a.createElement(u,{dependency:e.config.dependency?a[e.config.dependency].v:null,showError:a[s].showE,apiConnector:i,data:this.state[e.config.reference],setValues:this.setCustomRelationFieldValues});case"relationship":return r.a.createElement(ie.a,{id:s,key:s,name:s,select:!0,label:e.label,className:"".concat(o.field," ").concat(o.select),value:a[s].v,error:a[s].e&&a[s].showE,helperText:a[s].e&&a[s].showE?this.generateHelperText(e.required,e.validators):"",onChange:this.handleValueChange(s,e.required,e.validators)},r.a.createElement(Ee.a,{value:""}," "),n&&e.config&&e.config.reference?this.state[e.config.reference].map(function(e){return r.a.createElement(Ee.a,{key:e.k,value:e.k},e.v)}):[]);default:return r.a.createElement(ie.a,{id:s,key:s,name:s,label:e.label,type:["number","money","percent","amount"].includes(c)?"number":c,inputProps:["number","money","percent","amount"].includes(c)?{min:1,step:"any"}:{},multiline:"description"===c,className:o.field,value:a[s].v,error:a[s].e&&a[s].showE,helperText:a[s].e&&a[s].showE?this.generateHelperText(e.required,e.validators):"",onChange:this.handleValueChange(s,e.required,e.validators,c)})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.closeHandler,l=t.formBuilderSubject;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{variant:"h5",className:a.section},this.data?"Edytuj ":"Dodaj ",l),r.a.createElement(A.a,null),r.a.createElement("form",{onSubmit:this.handleSaveData,style:{maxHeight:700}},r.a.createElement(ge.a,{style:{maxHeight:"643px",overflowY:"auto"}},r.a.createElement(se.a,{cellHeight:60,cols:1,className:a.fieldList},this.fields.map(function(t,n){return r.a.createElement(ue.a,{key:"field".concat(n),className:a.textBox},e.getDataInput(t))}))),r.a.createElement(A.a,null),r.a.createElement("div",{className:a.section},r.a.createElement(ce.a,{variant:"contained",color:"primary",type:"submit",className:a.button},this.data?r.a.createElement(r.a.Fragment,null,"Edytuj",r.a.createElement($.a,{className:a.rightIcon})):r.a.createElement(r.a.Fragment,null,"Dodaj",r.a.createElement(ee.a,{className:a.rightIcon}))),r.a.createElement(ce.a,{color:"secondary",className:a.button,onClick:n(!1)},"Anuluj",r.a.createElement(re.a,{className:a.rightIcon})))))}}]),t}(n.Component),je=Object(E.a)(function(e){return{root:{border:"none !important",outline:"none !important",width:700,height:"fit-content",transform:"translateY(-50%)",margin:"50vh auto",overflowX:"auto",padding:"5px"},table:{minWidth:650},headCell:{fontSize:"1rem",fontWeight:"bold"},tableFooter:{},textBox:{width:"100% !important",height:"fit-content !important",minHeight:64},subTextBox:{float:"left",height:"fit-content !important",minHeight:64},subTextBoxTitle:{marginRight:"5%",width:"15% !important",textAlign:"right"},subTextBoxTitleFont:{height:64,lineHeight:"64px"},subTextBoxInput:{width:"75% !important"},field:{width:"100%","& .MuiFormHelperText-root":{fontStyle:"italic"},"& label.MuiInputLabel-shrink":{fontWeight:"bold"}},fieldList:{padding:"10px 25px !important",margin:"0 !important"},section:{padding:"10px 20px",display:"block",height:"56px"},button:{float:"right",marginRight:"10px"},rightIcon:{marginLeft:e.spacing(1)}}})(ke),Oe=a(354),Ce=a(218),Pe=a.n(Ce),Se=a(219),Ne=a.n(Se),xe=a(80),Te=a.n(xe),De=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).state={loaded:!1},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.apiConnector,a={loaded:!0},n=[],r=[];this.props.filters.forEach(function(e){"relationship"===e.type&&e.config&&e.config.reference&&(n.push(t.getSelectValues(e.config.reference)),r.push(e.config.reference))}),n.length?Promise.all(n).then(function(t){t.forEach(function(e,t){e&&e.data&&(a[r[t]]=Object.keys(e.data).map(function(t){return{k:t,v:e.data[t]}}))}),e.setState(a)}):this.setState(a)}},{key:"getFilterInput",value:function(e,t){var a=this.props,n=a.classes,l=a.values,o=a.setFilterValue,i=this.state.loaded;switch(e.type){case"date":return r.a.createElement(Te.a,{key:t,className:n.fieldBox},r.a.createElement(ie.a,{id:"".concat(e.name,"_modif"),select:!0,key:"".concat(t,"_modif"),className:"".concat(n.field," ").concat(n.fieldModifier),value:l[e.name][0],onChange:o(e.name,"modifier")},r.a.createElement(Ee.a,{value:":"},"="),r.a.createElement(Ee.a,{value:">"},">="),r.a.createElement(Ee.a,{value:"<"},"<=")),r.a.createElement(oe.b,{utils:le.a,locale:ve.a},r.a.createElement(oe.a,{id:e.name,label:e.fLabel||e.label,className:"".concat(n.field," ").concat(n.fieldShort),value:l[e.name][1],onChange:o(e.name,"date"),format:"dd-MM-yyyy",invalidLabel:"",clearable:!0})));case"number":case"money":case"amount":return r.a.createElement(Te.a,{key:t,className:n.fieldBox},r.a.createElement(ie.a,{id:"".concat(e.name,"_modif"),select:!0,key:"".concat(t,"_modif"),className:"".concat(n.field," ").concat(n.fieldModifier),value:l[e.name][0],onChange:o(e.name,"modifier")},r.a.createElement(Ee.a,{value:":"},"="),r.a.createElement(Ee.a,{value:">"},">="),r.a.createElement(Ee.a,{value:"<"},"<=")),r.a.createElement(ie.a,{id:e.name,key:t,label:e.fLabel||e.label,className:"".concat(n.field," ").concat(n.fieldShort),value:l[e.name][1],inputProps:{min:0},type:"number",onChange:o(e.name,"number")}));case"select":return r.a.createElement(ie.a,{id:e.name,key:t,select:!0,label:e.fLabel||e.label,className:"".concat(n.field," ").concat(n.select),value:l[e.name],onChange:o(e.name)},r.a.createElement(Ee.a,{value:""}," "),e.config?e.config.values.map(function(e){return r.a.createElement(Ee.a,{key:e.v,value:e.v},e.l)}):[]);case"relationship":case"custom_relationship":return r.a.createElement(ie.a,{id:e.fName||e.name,key:t,select:!0,label:e.fLabel||e.label,className:"".concat(n.field," ").concat(n.select),value:l[e.fName||e.name],onChange:o(e.fName||e.name)},r.a.createElement(Ee.a,{value:""}," "),i&&e.config&&e.config.reference?this.state[e.config.reference].map(function(e){return r.a.createElement(Ee.a,{key:e.k,value:e.k},e.v)}):[]);default:return r.a.createElement(ie.a,{id:e.name,key:t,label:e.fLabel||e.label,className:Object(y.default)(n.field),value:l[e.name],onChange:o(e.name)})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.clearFilters,n=t.handleFilter,l=t.filters,o=t.classes;return r.a.createElement(Y.a,{className:o.container},r.a.createElement("form",{noValidate:!0,autoComplete:"off",className:o.form,onSubmit:n},r.a.createElement("div",{className:o.filters},l.map(function(t,a){return e.getFilterInput(t,a)})),r.a.createElement("div",{className:o.filterActions},r.a.createElement(te.a,{className:o.btn,size:"small",color:"secondary","aria-label":"Wyczy\u015b\u0107 Filtry",onClick:a},r.a.createElement(Pe.a,null)),r.a.createElement(te.a,{type:"submit",size:"small",color:"primary",className:o.btn,"aria-label":"Wyszukaj"},r.a.createElement(Ne.a,null)))))}}]),t}(n.Component),Fe=Object(E.a)(function(e){return{container:{display:"flex",flexWrap:"wrap",marginBottom:50},field:{marginRight:"2%",minWidth:"18%",marginTop:10},fieldBox:{width:182,marginRight:"2%",display:"inline-flex"},fieldShort:{width:132,minWidth:132,marginRight:0},select:{width:182,overflow:"hidden","& > div":{height:32},"& .MuiSelect-root":{marginTop:0},"& .MuiSelect-select":{backgroundColor:"transparent !important"}},fieldModifier:{width:50,marginRight:0,minWidth:50,overflow:"hidden","& > div":{height:48},"& .MuiSelect-root":{marginTop:12}},form:{width:"100%"},formTitle:{width:"100%"},formControl:{margin:e.spacing(1),minWidth:250},driverSelect:{minWidth:200},btn:{marginTop:4,marginRight:8,float:"right"},filters:{width:"90%",float:"left"},filterActions:{width:"10%",float:"left",display:"block",position:"relative",top:"50%",transform:"translateY(-50%)"}}})(De),Ae=a(46),Ie=a(373),Be=a(138),Ve=a.n(Be),Me=a(139),ze=a.n(Me),We=a(69),Le=a.n(We),qe=a(361),Re=a(70),He=a.n(Re),Ue=a(88),_e=a.n(Ue),Ge=a(89),Ke=a.n(Ge),Ze=a(31),Je=a.n(Ze),Xe=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).switchState=function(e){return function(t){t.preventDefault(),a.setState({isOpened:e})}},a.state={isOpened:!1,loaded:!1},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.getData,n=t.id,r=t.reference,l={loaded:!0};a?a(n).then(function(t){t&&t.data&&(l[r]=t.data),e.setState(l)}):this.setState(l)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.data,n=e.columns,l=e.reference,o=this.state,i=o.isOpened,c=o.loaded,s=this.state[l]||a;return console.log(this.state[l],a),r.a.createElement(r.a.Fragment,null,c&&s.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{href:"#",onClick:this.switchState(!0)},r.a.createElement(Le.a,{className:t.showButton},r.a.createElement(qe.a,null))),r.a.createElement(Ve.a,{fullWidth:!0,maxWidth:"sm","aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:i,onClose:this.switchState(!1),closeAfterTransition:!0,BackdropComponent:ze.a,BackdropProps:{timeout:500}},r.a.createElement(_e.a,{cellHeight:60,cols:1,className:t.fieldList},s.map(function(e,a){return r.a.createElement(Ke.a,{key:a,className:t.tile},r.a.createElement(He.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},n.length?n.map(function(t){var a=t.indexOf(".")>0?e[t.split(".")[0]][t.split(".")[1]]:e[t];return r.a.createElement(Je.a,{key:a},a)}):Object.keys(e).map(function(t){return r.a.createElement(Je.a,{key:e[t]},e[t])})))})))):r.a.createElement(r.a.Fragment,null))}}]),t}(n.Component),Ye=Object(E.a)(function(e){return{fieldList:{padding:"10px 25px",margin:"0 !important"},showButton:{padding:"0 12px"},tile:{height:"26px !important","&:nth-child(even)":{backgroundColor:"#dddddd3d"}}}})(Xe),Qe=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).switchState=function(e){return function(t){t.preventDefault(),a.setState({isOpened:e})}},a.state={isOpened:!1},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.classes,n=this.state.isOpened;return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{href:"#",onClick:this.switchState(!0)},r.a.createElement(Le.a,{className:a.showButton},r.a.createElement(qe.a,null))),r.a.createElement(Ve.a,{className:a.root,fullWidth:!0,maxWidth:"sm","aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:n,onClose:this.switchState(!1),closeAfterTransition:!0,BackdropComponent:ze.a,BackdropProps:{timeout:500}},t))}}]),t}(n.Component),$e=Object(E.a)(function(e){return{root:{"& .MuiPaper-root":{padding:"10px 25px",margin:"0 !important"}},showButton:{padding:5}}})(Qe),et=a(61),tt=a.n(et),at=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).handleChangeRowsPerPage=function(e){var t=a.state.filterValues;a.reloadTable({perPage:parseInt(e.target.value,10),page:0,filterValues:t})},a.handleChangePage=function(e,t){var n=a.state,r=n.filterValues,l=n.perPage;a.reloadTable({perPage:l,page:t,filterValues:r})},a.handleFilterValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){var r=a.state.filterValues,l={};switch(t){case"number":case"amount":case"percent":case"money":l[e]=[r[e][0],parseFloat(n.target.value)<0?0:n.target.value];break;case"date":l[e]=[r[e][0],n];break;case"modifier":l[e]=[n.target.value,r[e][1]];break;default:l[e]=n.target.value}a.setState({filterValues:Object.assign(a.state.filterValues,l)})}},a.handleClearFilters=function(){var e=a.state,t=e.page,n=e.perPage;a.reloadTable({perPage:n,page:t,filterValues:Object.assign({},a.defaultFilterValues)})},a.handleFilter=function(e){e.preventDefault(),a.reloadTable()},a.handleFormModalState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var r=a.state,l=r.page,o=r.perPage;!e&&n&&a.reloadTable({perPage:o,page:l,filterValues:Object.assign({},a.defaultFilterValues)}),a.setState({showFormModal:e,formModalEditData:t})}},a.changeStatus=function(e){return function(t){var n=a.props,r=n.apiConnector,l=n.tableName;r.changeStatus(l,e,t.target.value).then(function(e){a.reloadTable()}).catch(function(e){console.log(e)})}},a.rowCounter=1,a.columns=e.columns,a.getData=e.getData,a.filters=e.filterGroups||[],a.filters=a.filters?a.filters.concat(e.columns.filter(function(e){return e.filter})):[],a.defaultFilterValues={},a.filters.forEach(function(e){switch(e.type){case"number":case"amount":case"money":a.defaultFilterValues[e.fName||e.name]=[":",""];break;case"date":a.defaultFilterValues[e.fName||e.name]=[":",null];break;default:a.defaultFilterValues[e.fName||e.name]=""}}),a.state={dataIsLoading:!0,data:[],total:0,perPage:10,page:0,filterValues:Object.assign({},a.defaultFilterValues),showFormModal:!1,formModalEditData:null},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentWillUpdate",value:function(e,t,a){this.rowCounter=t.page*t.rowsPerPage+1}},{key:"componentDidMount",value:function(){this.reloadTable()}},{key:"reloadTable",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.state,a=t.filterValues,n=t.perPage,r=t.page,l="";Object.keys(a).forEach(function(t){var n=e.filters.find(function(e){return e.name===t||e.fName===t});if(a[t]&&n.columns&&n.columns.length)n.columns.forEach(function(e){return l+="".concat(e,":").concat(nt(a[t],n.type),",")});else switch(n.type){case"date":case"amount":case"money":case"number":(a[t][1]||0===a[t][1])&&(l+="".concat(t).concat(a[t][0]).concat(nt(a[t][1],n.type),"."));break;default:(a[t]||0===a[t])&&(l+="".concat(t,":").concat(nt(a[t],n.type),"."))}});var o={perPage:n,page:r};this.getData(l,o).then(function(t){var l=t.data;t.data?e.setState({data:l.data,total:l.total,filterValues:a,perPage:n,page:r,dataIsLoading:!1}):console.log(t.error)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.perPage,l=t.page,o=t.total,i=t.filterValues,c=t.dataIsLoading,s=t.formModalEditData,u=t.showFormModal,d=this.props,m=d.classes,p=d.apiConnector,h=d.tableName,f=d.canAddData,g=d.canEditData,b=d.formBuilderSubject,v=d.saveData,y=this.columns.filter(function(e){return e.inTable}),E=r.a.createElement(Q.a,{variant:"h3"},"\u0141adowanie danych . . ."),w=r.a.createElement(Q.a,{variant:"h3"},"Brak danych"),k=r.a.createElement(r.a.Fragment,null,r.a.createElement(Te.a,{className:m.root},r.a.createElement(_.a,{className:m.table},r.a.createElement(Z.a,null,r.a.createElement(J.a,null,y.map(function(e,t){return r.a.createElement(K.a,{className:m.headCell,key:t},e.label)}),g?r.a.createElement(K.a,null):r.a.createElement(r.a.Fragment,null))),r.a.createElement(G.a,null,a.map(function(t,a){return r.a.createElement(J.a,{key:a,style:{whiteSpace:"nowrap"},className:m.tableRow},y.map(function(a,n){var l=a.name.indexOf(".")>0?t[a.name.split(".")[0]][a.name.split(".")[1]]:t[a.name],o=a.config&&a.config.type?a.config.type:a.type;return r.a.createElement(K.a,{key:n},l||0===l||"custom_relationship"===a.type?e.parseValue(o,l,a.name,a.config||null,t.id):"")}),g?r.a.createElement(K.a,null,r.a.createElement(j.a,{onClick:e.handleFormModalState(!0,t),className:m.editButton},r.a.createElement($.a,null))):r.a.createElement(r.a.Fragment,null))})))),r.a.createElement(Te.a,{className:m.paginationBox},r.a.createElement(X.a,{className:m.pagination,rowsPerPageOptions:[5,10,25],colSpan:y.length+(g?1:0),count:o,rowsPerPage:n,page:l,component:Te.a,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return"Pokazano ".concat(t,"-").concat(a," z ").concat(n," pozycji")},labelRowsPerPage:"Pozycji na stron\u0119",onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage})));return r.a.createElement(r.a.Fragment,null,this.filters.length?r.a.createElement(Fe,{values:i,filters:this.filters,apiConnector:p,setFilterValue:this.handleFilterValue,clearFilters:this.handleClearFilters,handleFilter:this.handleFilter}):r.a.createElement(r.a.Fragment,null),r.a.createElement(Y.a,null,a.length>0?k:c?E:w),f?r.a.createElement(te.a,{color:"primary","aria-label":"Add",className:m.addButton,onClick:this.handleFormModalState(!0)},r.a.createElement(ee.a,null)):r.a.createElement(r.a.Fragment,null),f||g?r.a.createElement(Oe.a,{open:u,onClose:this.handleFormModalState(!1),fullWidth:!0,maxWidth:"order"===h?"md":"sm"},r.a.createElement(je,{tableName:h,formBuilderSubject:b,fields:this.columns.filter(function(e){return!e.excludeFromForm}),apiConnector:p,saveData:v||p.saveData,closeHandler:this.handleFormModalState,data:s})):r.a.createElement(r.a.Fragment,null))}},{key:"parseValue",value:function(e,t,a,n,l){switch(e){case"date":return Object(Ae.a)(new Date(t),"dd-MM-yyyy");case"object":var o=Object.values(t);if(!o.join("").length)return"";switch(a){case"gps":return r.a.createElement(q.a,{href:"http://www.google.com/maps/place/".concat(o[0],",").concat(o[1]),target:"_blank",rel:"noopener noreferrer"},o.join(", "));default:return Object.values(t).join(", ")}case"time":return"".concat(Math.floor(t/60),":").concat(t%60);case"length":return t.length;case"text":return t.length>12?r.a.createElement(rt,{placement:"bottom-start",interactive:!0,title:r.a.createElement("div",null,t.toString())},r.a.createElement("div",null,t.slice(0,12)+"...")):t;case"description":return r.a.createElement($e,{data:t});case"important":return r.a.createElement("b",null,r.a.createElement("u",null," ",t," "));case"amount":return 0===t?r.a.createElement(Q.a,{style:{color:"red"}},t):t;case"email":return r.a.createElement(q.a,{href:"mailto:".concat(t)},t);case"url":return r.a.createElement(q.a,{href:t},n&&n.urlTitle?n.urlTitle:"link");case"percent":return"".concat(parseInt(t),"%");case"money":return"".concat(parseInt(t)/100," z\u0142");case"select":if(n&&n.values){var i=this.props.classes,c=n.values.find(function(e){return e.v===t});return n.setStatus&&!c.b&&(!n.hidePrevValues||n.values[n.values.length-1].v>t&&n.hidePrevValues)?r.a.createElement(tt.a,{select:!0,className:i.select,variant:"outlined",value:t,onChange:this.changeStatus(l)},n.values.filter(function(e){return!n.hidePrevValues||n.hidePrevValues&&e.v>=t}).map(function(e){return r.a.createElement(Ee.a,{key:e.v,value:e.v},e.l)})):c?c.l:""}return t;case"relationship":case"custom_relationship":return n&&n.showModal?r.a.createElement(Ye,{data:t,label:n.label,columns:n.columns,getData:n.getData,reference:n.reference,id:l}):t;default:return t}}}]),t}(n.Component);function nt(e,t){switch(t){case"number":case"amount":case"money":return e=e.replace(",","."),isNaN(parseInt(100*e))?"":parseInt(100*e);case"percent":return parseInt(e.replace(",","."));case"date":return Object(Ae.a)(e,"dd_MM_yyyy");case"time":return e.includes(":")?parseInt(60*e.split(":")[0])+parseInt(e.split(":")[1]):parseInt(e);default:return e}}var rt=Object(E.a)(function(e){return{tooltip:{maxWidth:220,fontSize:e.typography.pxToRem(12),border:"1px solid #dadde9"}}})(Ie.a),lt=Object(E.a)(function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"},paginationBox:{width:"100%"},pagination:{width:"100%",float:"right",padding:0,backgroundColor:"#ddddddde"},table:{minWidth:650,"& > thead":{backgroundColor:"#ddddddde"}},tableRow:{"&:nth-child(even)":{backgroundColor:"#dddddd3d"}},headCell:{fontSize:"1rem",fontWeight:"bold"},tableFooter:{},addButton:{position:"fixed",bottom:"20px",right:"20px"},editButton:{padding:5},select:{"& fieldset":{border:"none"},"& .MuiSelect-select":{marginRight:20,padding:0,backgroundColor:"transparent !important",fontSize:14}}}})(at),ot=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).columns=[{name:"name",label:"Nazwa",filter:!1,inTable:!0,required:!0,type:"important"},{name:"nip",label:"NIP",filter:!1,inTable:!0,type:"important",required:!0},{name:"address",label:"Adres",filter:!1,inTable:!0},{name:"phone",label:"Telefon kontaktowy",filter:!1,inTable:!0,type:"phone"},{name:"email",label:"Adres Email",filter:!1,inTable:!0,type:"email",validators:"email"},{name:"contactPerson",label:"Osoba Kontaktowa",filter:!1,inTable:!0}],a.filterGroups=[{name:"search",label:"Wyszukaj",columns:["name","nip","email","contactPerson","address"],type:"group"}],a.formBuilderSubject="Klienta",a.tableName="client",a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.apiConnector;return r.a.createElement(lt,{apiConnector:e,getData:e.getClients,formBuilderSubject:this.formBuilderSubject,columns:this.columns,filterGroups:this.filterGroups,canAddData:!0,canEditData:!0,tableName:this.tableName})}}]),t}(n.Component),it=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).columns=[{name:"name",label:"Nazwa",filter:!1,inTable:!0,required:!0,type:"important"},{name:"nip",label:"NIP",filter:!1,inTable:!0,required:!0,type:"important"},{name:"address",label:"Adres",filter:!1,inTable:!0},{name:"phone",label:"Telefon kontaktowy",filter:!1,inTable:!0,type:"phone"},{name:"email",label:"Adres Email",filter:!1,inTable:!0,type:"email",validators:"email"},{name:"page",label:"Strona Internetowa",filter:!1,inTable:!0,type:"url",validators:"url",config:{urlTitle:"Strona Dostawcy"}},{name:"contactPerson",label:"Osoba Kontaktowa",filter:!1,inTable:!0}],a.filterGroups=[{name:"search",label:"Wyszukaj",columns:["name","nip","email","phone","page","contactPerson"],type:"group"}],a.formBuilderSubject="Dostawc\u0119",a.tableName="deliverer",a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.apiConnector;return r.a.createElement(lt,{apiConnector:e,getData:e.getDeliverers,formBuilderSubject:this.formBuilderSubject,columns:this.columns,filterGroups:this.filterGroups,canAddData:!0,canEditData:!0,tableName:this.tableName})}}]),t}(n.Component),ct=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).columns=[{name:"product.code",label:"Kod Produktu",filter:!1,type:"relationship",inTable:!0,required:!0,config:{reference:"product",showModal:!1,type:"important"}},{name:"product.name",label:"Nazwa Produktu",filter:!1,type:"relationship",inTable:!0,excludeFromForm:!0,required:!0,config:{reference:"product",showModal:!1}},{name:"available",label:"Dost\u0119pna ilo\u015b\u0107",filter:!1,type:"amount",inTable:!0,required:!0},{name:"reserved",label:"Zarezerwowana ilo\u015b\u0107",filter:!1,type:"number",inTable:!0,required:!0}],a.formBuilderSubject="Stan Magazynowy",a.tableName="warehouse/content",a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.apiConnector;return r.a.createElement(lt,{apiConnector:e,getData:e.getWarehouseContents,formBuilderSubject:this.formBuilderSubject,columns:this.columns,canAddData:!1,canEditData:!1,tableName:this.tableName})}}]),t}(n.Component),st=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).columns=[{name:"code",label:"Kod",filter:!1,inTable:!0,required:!0,type:"important"},{name:"status",label:"Status",filter:!0,inTable:!0,required:!0,type:"select",config:{values:[{v:0,l:"Niedost\u0119pny"},{v:1,l:"Dost\u0119pny"}],setStatus:!0}},{name:"name",label:"Nazwa",filter:!1,inTable:!0,required:!0,type:"text"},{name:"deliverer.name",label:"Dostawca",filter:!0,inTable:!0,required:!0,type:"relationship",config:{reference:"deliverer"},fName:"delivererId"},{name:"buyNettPrice",label:"Cena Netto (Zakup)",filter:!0,inTable:!0,required:!0,type:"money",fLabel:"Cena zakupu"},{name:"sellNettPrice",label:"Cena Netto (Sprzeda\u017c)",filter:!0,inTable:!0,required:!0,type:"money",fLabel:"Cena sprzeda\u017cy"},{name:"taxcat.tax",label:"VAT",filter:!1,inTable:!0,required:!0,type:"relationship",config:{reference:"taxcat",type:"percent"},fName:"taxcatId"},{name:"unit",label:"Jednostka",filter:!1,inTable:!0,required:!0},{name:"optimalQuant",label:"Optimum magazynowe",filter:!1,inTable:!0,required:!0},{name:"minimalQuant",label:"Minimum magazynowe (%)",filter:!1,inTable:!0,required:!0,type:"percent"},{name:"category",label:"Kategoria",filter:!1,inTable:!0,required:!0},{name:"brand",label:"Marka",filter:!1,inTable:!0,required:!0},{name:"desc",label:"Opis",filter:!1,inTable:!0,type:"description"}],a.filterGroups=[{name:"search",label:"Wyszukaj",columns:["name","category","brand","code"],type:"group"}],a.formBuilderSubject="Produkt",a.tableName="product",a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.apiConnector;return r.a.createElement(lt,{apiConnector:e,getData:e.getProducts,formBuilderSubject:this.formBuilderSubject,columns:this.columns,filterGroups:this.filterGroups,canAddData:!0,canEditData:!0,tableName:this.tableName})}}]),t}(n.Component),ut=a(367),dt=a(52),mt=a.n(dt),pt=a(141),ht=a.n(pt),ft=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={chosenProducts:[],currentProduct:"",currentAmount:1,currentStatus:!0,showProductError:!1,currentProductError:!0},a.addProduct=function(){var e=a.state,t=e.chosenProducts,n=e.currentProduct,r=e.currentAmount,l=e.currentProductError,o=a.props.apiConnector;l?a.setState({showProductError:!0}):o.checkAvailability(n,r).then(function(e){t.push({id:n,amount:r,status:e}),a.setState({chosenProducts:t,currentProduct:"",currentAmount:1,showProductError:!1,currentProductError:!0,currentStatus:!0}),a.updateParentValues(t)})},a.removeProduct=function(e){return function(){var t=a.state.chosenProducts;t.filter(function(t){return t.product!==e}),a.setState({chosenProducts:t}),a.updateParentValues(t)}},a.changeProductValue=function(e){return function(t){var n=a.state.chosenProducts,r=a.props.apiConnector,l=n.find(function(t){return t.id===e}),o=parseInt(t.target.value.replace(",","."));l.amount=o>0?o:l.amount,r.checkAvailability(l.id,l.amount).then(function(e){l.status=e,a.setState({chosenProducts:n}),a.updateParentValues(n)})}},a.setCurrentProduct=function(e){var t=a.state.currentAmount,n=a.props.apiConnector;t?n.checkAvailability(e.target.value,t).then(function(t){a.setState({currentProduct:e.target.value,currentProductError:!e.target.value.length,currentStatus:t})}):a.setState({currentProduct:e.target.value,currentProductError:!e.target.value.length})},a.setCurrentAmount=function(e){var t=a.state,n=t.currentAmount,r=t.currentProduct,l=a.props.apiConnector,o=parseInt(e.target.value.replace(",","."));o=o>0?o:n,r?l.checkAvailability(r,o).then(function(e){a.setState({currentAmount:o,currentStatus:e})}):a.setState({currentAmount:o})},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"updateParentValues",value:function(e){var t=this.props.setValues,a={productIds:[],productAmounts:[]};e.forEach(function(e){a.productIds.push(e.id),a.productAmounts.push(e.amount)}),t(a)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.data,l=t.showError,o=this.state,i=o.chosenProducts,c=o.currentAmount,s=o.currentProduct,u=o.currentProductError,d=o.showProductError,m=o.currentStatus,p=r.filter(function(e){return!i.find(function(t){return t.id===e.k})});return n.createElement(n.Fragment,null,n.createElement(mt.a,{elevation:2,style:{border:l&&!i.length?"1px solid red":"none"}},n.createElement(mt.a,{elevation:3,className:a.productsList},n.createElement(Je.a,null,"Zamawiane produkty: "),n.createElement(ht.a,null),n.createElement(_e.a,{cellHeight:60,cols:1,className:a.fieldList,style:{marginTop:10}},i.map(function(t){return n.createElement(Ke.a,{key:t.id,style:{height:58}},n.createElement(He.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},n.createElement(Je.a,{className:"".concat(a.addedProductField," ").concat(a.addedProductName)},r.find(function(e){return e.k===t.id}).v),n.createElement(tt.a,{type:"number",inputProps:{min:1},className:a.addedProductField,error:!t.status,helperText:t.status?"":"Wymagana dostawa!",value:t.amount,onChange:e.changeProductValue(t.id)}),n.createElement(Le.a,{className:a.productButton,onClick:e.removeProduct(t.id)},n.createElement(ut.a,null))))}),l&&!i.length?n.createElement(Je.a,{style:{color:"red"}},"Dodaj przynajmniej jeden produkt!"):[])),n.createElement(He.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",style:{backgroundColor:"#ddd",padding:10}},n.createElement(tt.a,{id:"selectProduct",select:!0,label:"Produkt",className:a.newProductField,value:s,error:u&&d,onChange:this.setCurrentProduct},p?p.map(function(e){return n.createElement(Ee.a,{key:e.k,value:e.k},e.v)}):n.createElement(n.Fragment,null)),n.createElement(tt.a,{id:"selectAmount",type:"number",inputProps:{min:1},label:"Ilo\u015b\u0107",className:a.newProductField,value:c,error:!m,helperText:m?"":"Wymagana dostawa!",style:{width:"23%"},onChange:this.setCurrentAmount}),n.createElement(Le.a,{className:a.productButton,onClick:this.addProduct},n.createElement(ee.a,null)))))}}]),t}(n.Component),gt=Object(E.a)(function(e){return{newProductField:{width:"calc(75% - 48px)",height:68,marginRight:"1%","& .MuiFormHelperText-root":{fontStyle:"italic"},"& label.MuiInputLabel-shrink":{fontWeight:"bold"}},productButton:{height:48,lineHeight:"40px",width:48},addedProductField:{width:"23%",height:54,marginRight:"1%"},addedProductName:{width:"calc(75% - 48px)",height:54,lineHeight:"32px"},productsList:{margin:2,marginBottom:20,minHeight:50,padding:10}}})(ft),bt=function(e){function t(e){var a;Object(h.a)(this,t);var n=(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).props.apiConnector;return a.columns=[{name:"number",label:"Numer Zam\xf3wienia",filter:!0,inTable:!0,required:!0},{name:"status",label:"Status",filter:!0,inTable:!0,excludeFromForm:!0,type:"select",config:{values:[{v:0,l:"W oczekiwaniu na dostaw\u0119 ",b:!0},{v:1,l:"W realizacji"},{v:2,l:"Zrealizowane"}],hidePrevValues:!0,setStatus:!0}},{name:"createdAt",label:"Data Utworzenia",filter:!0,inTable:!0,excludeFromForm:!0,type:"date"},{name:"client.name",label:"Klient",filter:!0,filterType:"select",type:"relationship",config:{reference:"client",showModal:!1},inTable:!0,required:!0,fName:"clientId"},{name:"annotation",label:"Uwagi",filter:!1,inTable:!0,config:{showModal:!0}},{name:"orderedProducts",label:"Produkty",filter:!1,inTable:!0,type:"custom_relationship",config:{reference:"product",getData:n.getOrderProducts,columns:["product.name","amount"],idListNames:["productIds","productAmounts"],Component:gt,showModal:!0}}],a.formBuilderSubject="Zam\xf3wienie",a.tableName="order",a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.apiConnector;return r.a.createElement(lt,{apiConnector:e,getData:e.getOrders,formBuilderSubject:this.formBuilderSubject,columns:this.columns,canAddData:!0,canEditData:!1,tableName:this.tableName})}}]),t}(n.Component),vt=a(221),yt=a.n(vt),Et=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={chosenProducts:[],dependencyValue:null},a.chooseProduct=function(e){return function(){var t=a.state.chosenProducts,n=t;t.indexOf(e)>=0?n=t.filter(function(t){return t!==e}):n.push(e),a.setState({chosenProducts:n}),a.updateParentValues(n)}},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"updateParentValues",value:function(e){var t=this.props.setValues,a={productIds:[]};e.forEach(function(e){a.productIds.push(e)}),t(a)}},{key:"clearProducts",value:function(e){this.setState({chosenProducts:[],dependencyValue:e}),this.updateParentValues([])}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.data,l=t.showError,o=t.dependency,i=this.state,c=i.chosenProducts,s=i.dependencyValue,u=r.filter(function(e){return!o||JSON.parse(e.v).deliverer===parseInt(o)});return o&&o.length&&s!==o&&this.clearProducts(o),n.createElement(n.Fragment,null,n.createElement(mt.a,{elevation:2,style:{border:l&&!c.length?"1px solid red":"none"}},n.createElement(mt.a,{elevation:3,className:a.productsList},n.createElement(Je.a,null,"Produkty do zam\xf3wienia: "),n.createElement(ht.a,null),!l||c.length||o&&o.length?n.createElement(n.Fragment,null):n.createElement(Je.a,{style:{marginTop:10,color:"red"}},"Wybierz dostawc\u0119!"),n.createElement(_e.a,{cellHeight:60,cols:1,className:a.fieldList,style:{marginTop:10}},u.map(function(t){var r=JSON.parse(t.v);return console.log(r),n.createElement(Ke.a,{key:t.k},n.createElement(He.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},n.createElement(Je.a,{className:a.addedProductField},"".concat(r.name," ").concat(r.amount).concat(r.unit)),o&&o.length?n.createElement(yt.a,{checked:c.indexOf(t.k)>=0,onChange:e.chooseProduct(t.k),color:"primary"}):n.createElement(Je.a,{className:a.addedProductField},n.createElement("strong",null,r.dName))))})))))}}]),t}(n.Component),wt=Object(E.a)(function(e){return{newProductField:{width:"calc(79% - 48px)",marginRight:"1%","& .MuiFormHelperText-root":{fontStyle:"italic"},"& label.MuiInputLabel-shrink":{fontWeight:"bold"}},productButton:{height:48,lineHeight:"40px",width:48},addedProductField:{width:"90%",marginRight:"1%"},productsList:{margin:2,marginBottom:20,minHeight:50,padding:10}}})(Et),kt=function(e){function t(e){var a;Object(h.a)(this,t);var n=(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).props.apiConnector;return a.columns=[{name:"number",label:"Numer Dostawy",filter:!0,inTable:!0,required:!0,type:"important"},{name:"status",label:"Status",filter:!0,inTable:!0,excludeFromForm:!0,type:"select",config:{values:[{v:0,l:"Nowa"},{v:1,l:"W realizacji"},{v:2,l:"Zrealizowana"}],hidePrevValues:!0,setStatus:!0}},{name:"date",label:"Data Utworzenia",filter:!0,inTable:!0,excludeFromForm:!0,type:"date"},{name:"deliverer.name",label:"Dostawca",filter:!0,type:"relationship",config:{reference:"deliverer",showModal:!1},inTable:!0,required:!0,fName:"delivererId"},{name:"deliveryProducts",label:"Produkty",filter:!1,inTable:!0,type:"custom_relationship",config:{reference:"deliveryProducts",getData:n.getDeliveryProducts,dependency:"delivererId",columns:["product.name","quantity","orderId"],idListNames:["productIds"],Component:wt,showModal:!0}}],a.formBuilderSubject="Dostaw\u0119",a.tableName="delivery",a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.apiConnector;return r.a.createElement(lt,{apiConnector:e,getData:e.getDeliveries,formBuilderSubject:this.formBuilderSubject,columns:this.columns,canAddData:!0,canEditData:!1,tableName:this.tableName})}}]),t}(n.Component),jt=a(368),Ot=function(e){function t(e){var a;Object(h.a)(this,t);var n=(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).props.apiConnector.user,r=n.name,l=n.surname,o=n.login,i=n.email;return a.state={name:{label:"Imi\u0119",value:r,error:!1,showError:!1},surname:{label:"Nazwisko",value:l,error:!1,showError:!1},login:{label:"Login",value:o,error:!1,showError:!1},email:{label:"Email",value:i,error:!1,showError:!1,type:"email"},password:{label:"Nowe Has\u0142o",value:"",error:!1,showError:!1,type:"password"},passwordConfirm:{label:"Potwierd\u017a Has\u0142o",value:"",error:!1,showError:!1,type:"password"}},a.columns=[{name:"login",label:"Login",filer:!1,inTable:!0,required:!0},{name:"name",label:"Imi\u0119",filter:!1,inTable:!0,required:!0,type:"important"},{name:"surname",label:"Nazwisko",filter:!1,inTable:!0,type:"important",required:!0},{name:"position",label:"Stanowisko",filter:!1,inTable:!0,type:"select",config:{values:[{v:1,l:"Mened\u017cer"},{v:2,l:"Kierownik Sprzeda\u017cy"},{v:3,l:"Kierownik Zaopatrzenia"},{v:4,l:"Magazynier"}]}},{name:"salary",label:"Pensja",filter:!1,inTable:!0},{name:"email",label:"Adres Email",filter:!1,inTable:!0,type:"email",validators:"email"},{name:"password",label:"Adres Email",filter:!1,inTable:!1,required:!0},{name:"email",label:"Adres Email",filter:!1,inTable:!0,type:"email",validators:"email"}],a.formBuilderSubject="Pracownika",a.tableName="user",a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"setValue",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.apiConnector,n=t.classes,l=t.position;return r.a.createElement(r.a.Fragment,null,r.a.createElement(mt.a,null,r.a.createElement(Je.a,{display:"block",variant:"h3"},"Witaj ",a.user.name,"!")),r.a.createElement(mt.a,{className:n.root,elevation:2},r.a.createElement(Je.a,{display:"block",variant:"h5"},"  Twoje dane "),r.a.createElement(jt.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},Object.keys(this.state).map(function(t){return r.a.createElement(tt.a,{id:t,key:t,label:e.state[t].label,className:n.formControl,value:e.state[t].value,type:e.state[t].type||"text",onChange:e.setValue(e.state[t].name)})}))),[0,1].includes(l)?r.a.createElement(lt,{apiConnector:a,getData:a.getWorkers,saveData:a.saveUserData,formBuilderSubject:this.formBuilderSubject,columns:this.columns,canAddData:!0,canEditData:!0,tableName:this.tableName}):r.a.createElement(r.a.Fragment,null))}}]),t}(n.Component),Ct=Object(E.a)(function(e){return{root:{width:"100%",padding:25,marginTop:e.spacing(3),marginRight:e.spacing(1),overflowX:"auto"},formControl:{margin:"".concat(e.spacing(1),"px ").concat(e.spacing(3),"px"),minWidth:250}}})(Ot),Pt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).columns=[{name:"id",label:"Id",filter:!0,inTable:!0},{name:"owner.name",label:"W\u0142a\u015bciciel",filter:!1,inTable:!0,type:"relationship",config:{reference:"user"},fName:"ownerId"},{name:"createdAt",label:"Data rejestracji",filter:!0,inTable:!0,type:"date"},{name:"status",label:"Status",filter:!0,inTable:!0,type:"select",config:{values:[{v:0,l:"Niedzia\u0142aj\u0105cy"},{v:1,l:"Dzia\u0142aj\u0105cy"}]}},{name:"paymentStatus",label:"Status p\u0142atno\u015bci",filter:!0,inTable:!0,type:"select",config:{values:[{v:0,l:"Nieop\u0142acony"},{v:1,l:"Op\u0142acony"}]}}],a.formBuilderSubject="Magazyn",a.tableName="warehouse",a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.apiConnector;return r.a.createElement(lt,{apiConnector:e,getData:e.getWarehouses,formBuilderSubject:this.formBuilderSubject,columns:this.columns,canAddData:!1,canEditData:!1,tableName:this.tableName})}}]),t}(n.Component),St=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).columns=[{name:"id",label:"Id",filter:!1,inTable:!0,required:!0,excludeFromForm:!0},{name:"name",label:"Nazwa",filter:!1,inTable:!0,required:!0},{name:"tax",label:"% Podatku",filter:!1,inTable:!0,required:!0}],a.formBuilderSubject="Kategori\u0119 podatkow\u0105",a.tableName="taxcat",a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.apiConnector;return r.a.createElement(lt,{apiConnector:e,getData:e.getTaxes,formBuilderSubject:this.formBuilderSubject,columns:this.columns,canAddData:!0,canEditData:!0,tableName:this.tableName})}}]),t}(n.Component),Nt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).handleMenuState=function(){a.setState({menuOpen:!a.state.menuOpen})},a.state={menuOpen:window.innerWidth>1200,menuItems:[{title:"Strona g\u0142\xf3wna",path:"/app/home",component:Ct,roles:[null,0,1,2,3,4]},{title:"Klienci",path:"/app/client",component:ot,roles:[0,1,2]},{title:"Dostawcy",path:"/app/deliverer",component:it,roles:[0,1,3]},{title:"Produkty",path:"/app/products",component:st,roles:[0,1,2,3,4]},{title:"Stan Magazynowy",path:"/app/avail",component:ct,roles:[0,1,2,3,4]},{title:"Zam\xf3wienia",path:"/app/orders",component:bt,roles:[0,1,2,4]},{title:"Dostawy",path:"/app/deliveries",component:kt,roles:[0,1,3,4]},{title:"Magazyny",path:"/app/warehouses",component:Pt},{title:"Kategorie podatkowe",path:"/app/taxes",component:St}]},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.apiConnector,l=t.handleLog,o=this.state,i=o.menuOpen,c=o.menuItems,u=n.user.role,d=n.user.position;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{menuOpen:i,menuItems:c,role:u,position:d,handleMenuState:this.handleMenuState}),r.a.createElement(x,{menuOpen:i,apiConnector:n,handleMenuState:this.handleMenuState,handleLog:l}),r.a.createElement("div",{className:Object(y.default)(a.content,Object(p.a)({},a.contentShift,i))},r.a.createElement("div",{className:a.drawerHeader}),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/app/home",render:function(){return e.checkPathRoles([null,0,1,2,3,4])?r.a.createElement(Ct,{apiConnector:n,position:n.user.position}):r.a.createElement(s.a,{to:"/app/home"})}}),r.a.createElement(s.b,{path:"/app/warehouses",render:function(){return e.checkPathRoles()?r.a.createElement(Pt,{apiConnector:n}):r.a.createElement(s.a,{to:"/app/home"})}}),r.a.createElement(s.b,{path:"/app/taxes",render:function(){return e.checkPathRoles()?r.a.createElement(St,{apiConnector:n}):r.a.createElement(s.a,{to:"/app/home"})}}),r.a.createElement(s.b,{path:"/app/client",render:function(){return e.checkPathRoles([0,1,2])?r.a.createElement(ot,{apiConnector:n}):r.a.createElement(s.a,{to:"/app/home"})}}),r.a.createElement(s.b,{path:"/app/deliverer",render:function(){return e.checkPathRoles([0,1,3])?r.a.createElement(it,{apiConnector:n}):r.a.createElement(s.a,{to:"/app/home"})}}),r.a.createElement(s.b,{path:"/app/products",render:function(){return e.checkPathRoles([0,1,2,3,4])?r.a.createElement(st,{apiConnector:n}):r.a.createElement(r.a.Fragment,null)}}),r.a.createElement(s.b,{path:"/app/avail",render:function(){return e.checkPathRoles([0,1,2,3,4])?r.a.createElement(ct,{apiConnector:n}):r.a.createElement(s.a,{to:"/app/home"})}}),r.a.createElement(s.b,{path:"/app/orders",render:function(){return e.checkPathRoles([0,1,2,4])?r.a.createElement(bt,{apiConnector:n}):r.a.createElement(s.a,{to:"/app/home"})}}),r.a.createElement(s.b,{path:"/app/deliveries",render:function(){return e.checkPathRoles([0,1,3,4])?r.a.createElement(kt,{apiConnector:n}):r.a.createElement(s.a,{to:"/app/home"})}}),r.a.createElement(s.b,{render:function(){return console.log("SWITCH!"),r.a.createElement(s.a,{to:"/app/home"})}}))))}},{key:"checkPathRoles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.props.apiConnector,a=t.user.role.id,n=t.user.position;return!e&&1===a||e&&e.includes(n)}}]),t}(n.Component),xt=Object(E.a)(function(e){return{content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:0,marginTop:64},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:240}}})(Nt);var Tt=function(e){return r.a.createElement(c.a,null,r.a.createElement("div",{className:"app__container"},r.a.createElement(i.a,null),r.a.createElement(d.a,{theme:Dt},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,render:function(){return r.a.createElement(s.a,{to:"/app/home"})}}),r.a.createElement(s.b,{path:"/app",exact:!0,render:function(){return r.a.createElement(s.a,{to:"/app/home"})}}),r.a.createElement(s.b,{path:"/app/*",render:function(){return r.a.createElement(xt,e)}})))))},Dt=Object(m.a)({palette:{primary:{main:"#2cd1ff"},secondary:{main:"#82fcff"},background:{paper:"#ffffff",default:"#ffffff"},text:{primary:"#3d3d3d",secondary:"#3d3d3d",disabled:"#3d3d3d24"}},shape:{borderRadius:0},overrides:{MuiAppBar:{colorPrimary:{backgroundColor:"#2cd1ff !important"}},MuiIconButton:{root:{color:"#3d3d3d"}},MuiLink:{root:{color:"#3d3d3d !important",textDecoration:"none"}},MuiPaper:{root:{boxShadow:"none",padding:0},elevation1:{boxShadow:"none"}}}}),Ft=a(28),At=a.n(Ft),It="".concat("http://localhost:8080"),Bt=new(function(){function e(){Object(h.a)(this,e),this.data=null,this.loggedIn=!1,this.getClients=this.getClients.bind(this),this.getDeliverers=this.getDeliverers.bind(this),this.getDeliveries=this.getDeliveries.bind(this),this.getOrders=this.getOrders.bind(this),this.getProducts=this.getProducts.bind(this),this.getWarehouses=this.getWarehouses.bind(this),this.getWarehouseContents=this.getWarehouseContents.bind(this),this.getWorkers=this.getWorkers.bind(this),this.getTaxes=this.getTaxes.bind(this),this.getUser=this.getUser.bind(this),this.getSelectValues=this.getSelectValues.bind(this),this.getDeliveryProducts=this.getDeliveryProducts.bind(this),this.getOrderProducts=this.getOrderProducts.bind(this),this.checkAvailability=this.checkAvailability.bind(this),this.saveData=this.saveData.bind(this),this.saveUserData=this.saveUserData.bind(this),this.changeStatus=this.changeStatus.bind(this),this.userId=window.userId,this.warehouseId=null,this.user=null}return Object(f.a)(e,[{key:"logout",value:function(){}},{key:"getClients",value:function(t,a){var n=e.buildUrl("".concat(It,"/api/clients/").concat(this.warehouseId),t,a);return At()({method:"get",url:n,headers:{"Access-Control-Allow-Origin":""}})}},{key:"getDeliverers",value:function(t,a){var n=e.buildUrl("".concat(It,"/api/deliverers/").concat(this.warehouseId),t,a);return At()({method:"get",url:n,headers:{"Access-Control-Allow-Origin":""}})}},{key:"getDeliveries",value:function(t,a){var n=e.buildUrl("".concat(It,"/api/deliveries/").concat(this.warehouseId),t,a);return At()({method:"get",url:n,headers:{"Access-Control-Allow-Origin":""}})}},{key:"getOrders",value:function(t,a){var n=e.buildUrl("".concat(It,"/api/orders/").concat(this.warehouseId),t,a);return At()({method:"get",url:n,headers:{"Access-Control-Allow-Origin":""}})}},{key:"getProducts",value:function(t,a){var n=e.buildUrl("".concat(It,"/api/products/").concat(this.warehouseId),t,a);return At()({method:"get",url:n,headers:{"Access-Control-Allow-Origin":""}})}},{key:"getWarehouses",value:function(t,a){var n=e.buildUrl("".concat(It,"/api/warehouses"),t,a);return At()({method:"get",url:n,headers:{"Access-Control-Allow-Origin":""}}).then(function(e){return e.data.data.forEach(function(e){return e.owner.name="".concat(e.owner.name," ").concat(e.owner.surname)}),e})}},{key:"getWarehouseContents",value:function(t,a){var n=e.buildUrl("".concat(It,"/api/warehouse/").concat(this.warehouseId,"/contents"),t,a);return At()({method:"get",url:n,headers:{"Access-Control-Allow-Origin":""}})}},{key:"getTaxes",value:function(t,a){var n=e.buildUrl("".concat(It,"/api/taxes"),t,a);return At()({method:"get",url:n,headers:{"Access-Control-Allow-Origin":""}})}},{key:"getWorkers",value:function(){var e=this;return At()({method:"get",url:"".concat(It,"/api/users/").concat(this.warehouseId),headers:{"Access-Control-Allow-Origin":""}}).then(function(t){return t.data.data=t.data.data.filter(function(t){return t.id!==e.user.id&&3===t.role.id}),t})}},{key:"getDeliveryProducts",value:function(e){return At()({method:"get",url:"".concat(It,"/api/delivery/").concat(e,"/products"),headers:{"Access-Control-Allow-Origin":""}})}},{key:"getOrderProducts",value:function(e){return At()({method:"get",url:"".concat(It,"/api/order/").concat(e,"/products"),headers:{"Access-Control-Allow-Origin":""}})}},{key:"getUser",value:function(){var e=this;return At()({method:"get",url:"".concat(It,"/api/user/").concat(this.userId),headers:{"Access-Control-Allow-Origin":""}}).then(function(t){return e.user=t.data,e.warehouseId=t.data.warehouseId,!0})}},{key:"getSelectValues",value:function(e){return At()({method:"get",url:"".concat(It,"/api/").concat(e,"/").concat(this.warehouseId,"/list"),headers:{"Access-Control-Allow-Origin":""}})}},{key:"saveData",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return a&&(t.id=a),t.warehouseId=this.warehouseId,At()({method:"post",data:t,url:"".concat(It,"/api/").concat(e),headers:{"Access-Control-Allow-Origin":"","Content-Type":"application/json",Accept:"application/json"}})}},{key:"saveUserData",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return a&&(t.id=a),t.warehouseId=this.warehouseId,At()({method:"put",data:t,url:"".concat(It,"/api/").concat(e).concat(a?"/"+a:""),headers:{"Access-Control-Allow-Origin":"","Content-Type":"application/json",Accept:"application/json"}})}},{key:"changeStatus",value:function(e,t,a){return At()({method:"post",url:"".concat(It,"/api/").concat(e,"/").concat(t,"/").concat(a),headers:{"Access-Control-Allow-Origin":"","Content-Type":"application/json",Accept:"application/json"}})}},{key:"checkAvailability",value:function(e,t){return At()({method:"get",url:"".concat(It,"/api/product/checkState/").concat(e,"/").concat(t),headers:{"Access-Control-Allow-Origin":"","Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return e.data})}}],[{key:"buildUrl",value:function(e,t,a){return a&&(e+="?pageSize=".concat(a.perPage,"&page=").concat(a.page+1)),t&&(e+="".concat(a?"&":"?","filter=").concat(t)),encodeURI(e)}}]),e}());Bt.getUser().then(function(){o.a.render(r.a.createElement(Tt,{apiConnector:Bt}),document.getElementById("root"))})}},[[236,1,2]]]);
//# sourceMappingURL=main.0d43c0aa.chunk.js.map